from model1 import generatelist, DynamicList, datatoset
if __name__ == '__main__':
    (array_time_1, array_len_1, array_tcplen_1, array_src_1, array_dst_1, array_proto_1, array_srcport_1, array_dstport_1, array_labels_1, array_sdport_1) = generatelist('C:/Users/lenovo/Desktop/dataprocesssort/data_sort/alipay.csv')
    print(array_labels_1)
    (array_time_2, array_len_2, array_tcplen_2, array_src_2, array_dst_2, array_proto_2, array_srcport_2, array_dstport_2, array_labels_2, array_sdport_2) = generatelist('C:/Users/lenovo/Desktop/dataprocesssort/data_sort/baidu.csv')
    print(array_labels_2)
    (array_time_3, array_len_3, array_tcplen_3, array_src_3, array_dst_3, array_proto_3, array_srcport_3, array_dstport_3, array_labels_3, array_sdport_3) = generatelist('C:/Users/lenovo/Desktop/dataprocesssort/data_sort/bilibili.csv')
    print(array_labels_3)
    (array_time_4, array_len_4, array_tcplen_4, array_src_4, array_dst_4, array_proto_4, array_srcport_4, array_dstport_4, array_labels_4, array_sdport_4) = generatelist('C:/Users/lenovo/Desktop/dataprocesssort/data_sort/douban.csv')
    print(array_labels_4)
    (array_time_5, array_len_5, array_tcplen_5, array_src_5, array_dst_5, array_proto_5, array_srcport_5, array_dstport_5, array_labels_5, array_sdport_5) = generatelist('C:/Users/lenovo/Desktop/dataprocesssort/data_sort/douyin.csv')
    print(array_labels_5)
    (array_time_6, array_len_6, array_tcplen_6, array_src_6, array_dst_6, array_proto_6, array_srcport_6, array_dstport_6, array_labels_6, array_sdport_6) = generatelist('C:/Users/lenovo/Desktop/dataprocesssort/data_sort/douyu.csv')
    print(array_labels_6)
    (array_time_7, array_len_7, array_tcplen_7, array_src_7, array_dst_7, array_proto_7, array_srcport_7, array_dstport_7, array_labels_7, array_sdport_7) = generatelist('C:/Users/lenovo/Desktop/dataprocesssort/data_sort/github.csv')
    print(array_labels_7)
    (array_time_8, array_len_8, array_tcplen_8, array_src_8, array_dst_8, array_proto_8, array_srcport_8, array_dstport_8, array_labels_8, array_sdport_8) = generatelist('C:/Users/lenovo/Desktop/dataprocesssort/data_sort/icloud.csv')
    print(array_labels_8)
    (array_time_9, array_len_9, array_tcplen_9, array_src_9, array_dst_9, array_proto_9, array_srcport_9, array_dstport_9, array_labels_9, array_sdport_9) = generatelist('C:/Users/lenovo/Desktop/dataprocesssort/data_sort/jd.csv')
    print(array_labels_9)
    (array_time_10, array_len_10, array_tcplen_10, array_src_10, array_dst_10, array_proto_10, array_srcport_10, array_dstport_10, array_labels_10, array_sdport_10) = generatelist('C:/Users/lenovo/Desktop/dataprocesssort/data_sort/kuaishou.csv')
    print(array_labels_10)
    (array_time_11, array_len_11, array_tcplen_11, array_src_11, array_dst_11, array_proto_11, array_srcport_11, array_dstport_11, array_labels_11, array_sdport_11) = generatelist('C:/Users/lenovo/Desktop/dataprocesssort/data_sort/meituan.csv')
    print(array_labels_11)
    (array_time_12, array_len_12, array_tcplen_12, array_src_12, array_dst_12, array_proto_12, array_srcport_12, array_dstport_12, array_labels_12, array_sdport_12) = generatelist('C:/Users/lenovo/Desktop/dataprocesssort/data_sort/mozilla.csv')
    print(array_labels_12)
    (array_time_13, array_len_13, array_tcplen_13, array_src_13, array_dst_13, array_proto_13, array_srcport_13, array_dstport_13, array_labels_13, array_sdport_13) = generatelist('C:/Users/lenovo/Desktop/dataprocesssort/data_sort/necmusic.csv')
    print(array_labels_13)
    (array_time_14, array_len_14, array_tcplen_14, array_src_14, array_dst_14, array_proto_14, array_srcport_14, array_dstport_14, array_labels_14, array_sdport_14) = generatelist('C:/Users/lenovo/Desktop/dataprocesssort/data_sort/pinduoduo.csv')
    print(array_labels_14)
    (array_time_15, array_len_15, array_tcplen_15, array_src_15, array_dst_15, array_proto_15, array_srcport_15, array_dstport_15, array_labels_15, array_sdport_15) = generatelist('C:/Users/lenovo/Desktop/dataprocesssort/data_sort/qq.csv')
    print(array_labels_15)
    (array_time_16, array_len_16, array_tcplen_16, array_src_16, array_dst_16, array_proto_16, array_srcport_16, array_dstport_16, array_labels_16, array_sdport_16) = generatelist('C:/Users/lenovo/Desktop/dataprocesssort/data_sort/sogou.csv')
    print(array_labels_16)
    (array_time_17, array_len_17, array_tcplen_17, array_src_17, array_dst_17, array_proto_17, array_srcport_17, array_dstport_17, array_labels_17, array_sdport_17) = generatelist('C:/Users/lenovo/Desktop/dataprocesssort/data_sort/suning.csv')
    print(array_labels_17)
    (array_time_18, array_len_18, array_tcplen_18, array_src_18, array_dst_18, array_proto_18, array_srcport_18, array_dstport_18, array_labels_18, array_sdport_18) = generatelist('C:/Users/lenovo/Desktop/dataprocesssort/data_sort/taobao.csv')
    print(array_labels_18)
    (array_time_19, array_len_19, array_tcplen_19, array_src_19, array_dst_19, array_proto_19, array_srcport_19, array_dstport_19, array_labels_19, array_sdport_19) = generatelist('C:/Users/lenovo/Desktop/dataprocesssort/data_sort/toutiao.csv')
    print(array_labels_19)
    (array_time_20, array_len_20, array_tcplen_20, array_src_20, array_dst_20, array_proto_20, array_srcport_20, array_dstport_20, array_labels_20, array_sdport_20) = generatelist('C:/Users/lenovo/Desktop/dataprocesssort/data_sort/weibo.csv')
    print(array_labels_20)
    (array_time_21, array_len_21, array_tcplen_21, array_src_21, array_dst_21, array_proto_21, array_srcport_21, array_dstport_21, array_labels_21, array_sdport_21) = generatelist('C:/Users/lenovo/Desktop/dataprocesssort/data_sort/zhihu.csv')
    print(array_labels_21)
    """(array_time_1, array_len_1, array_tcplen_1, array_src_1, array_dst_1, array_proto_1, array_srcport_1,
     array_dstport_1, array_labels_1, array_sdport_1) = generatelist(
        'C:/Users/lenovo/Desktop/dataprocesssort/data_sort_15/BitTorrent.csv')
    print(array_labels_1)
    (array_time_2, array_len_2, array_tcplen_2, array_src_2, array_dst_2, array_proto_2, array_srcport_2,
     array_dstport_2, array_labels_2, array_sdport_2) = generatelist(
        'C:/Users/lenovo/Desktop/dataprocesssort/data_sort_15/Cridex.csv')
    print(array_labels_2)
    (array_time_3, array_len_3, array_tcplen_3, array_src_3, array_dst_3, array_proto_3, array_srcport_3,
     array_dstport_3, array_labels_3, array_sdport_3) = generatelist(
        'C:/Users/lenovo/Desktop/dataprocesssort/data_sort_15/Gmail.csv')
    print(array_labels_3)
    (array_time_4, array_len_4, array_tcplen_4, array_src_4, array_dst_4, array_proto_4, array_srcport_4,
     array_dstport_4, array_labels_4, array_sdport_4) = generatelist(
        'C:/Users/lenovo/Desktop/dataprocesssort/data_sort_15/Htbot.csv')
    print(array_labels_4)
    (array_time_5, array_len_5, array_tcplen_5, array_src_5, array_dst_5, array_proto_5, array_srcport_5,
     array_dstport_5, array_labels_5, array_sdport_5) = generatelist(
        'C:/Users/lenovo/Desktop/dataprocesssort/data_sort_15/Miuref.csv')
    print(array_labels_5)
    (array_time_6, array_len_6, array_tcplen_6, array_src_6, array_dst_6, array_proto_6, array_srcport_6,
     array_dstport_6, array_labels_6, array_sdport_6) = generatelist(
        'C:/Users/lenovo/Desktop/dataprocesssort/data_sort_15/Neris.csv')
    print(array_labels_6)
    (array_time_7, array_len_7, array_tcplen_7, array_src_7, array_dst_7, array_proto_7, array_srcport_7,
     array_dstport_7, array_labels_7, array_sdport_7) = generatelist(
        'C:/Users/lenovo/Desktop/dataprocesssort/data_sort_15/Nsis-ay.csv')
    print(array_labels_7)
    (array_time_8, array_len_8, array_tcplen_8, array_src_8, array_dst_8, array_proto_8, array_srcport_8,
     array_dstport_8, array_labels_8, array_sdport_8) = generatelist(
        'C:/Users/lenovo/Desktop/dataprocesssort/data_sort_15/Outlook.csv')
    print(array_labels_8)
    (array_time_9, array_len_9, array_tcplen_9, array_src_9, array_dst_9, array_proto_9, array_srcport_9,
     array_dstport_9, array_labels_9, array_sdport_9) = generatelist(
        'C:/Users/lenovo/Desktop/dataprocesssort/data_sort_15/Shifu.csv')
    print(array_labels_9)
    (array_time_10, array_len_10, array_tcplen_10, array_src_10, array_dst_10, array_proto_10, array_srcport_10,
     array_dstport_10, array_labels_10, array_sdport_10) = generatelist(
        'C:/Users/lenovo/Desktop/dataprocesssort/data_sort_15/Skype.csv')
    print(array_labels_10)
    (array_time_11, array_len_11, array_tcplen_11, array_src_11, array_dst_11, array_proto_11, array_srcport_11,
     array_dstport_11, array_labels_11, array_sdport_11) = generatelist(
        'C:/Users/lenovo/Desktop/dataprocesssort/data_sort_15/SMB.csv')
    print(array_labels_11)
    (array_time_12, array_len_12, array_tcplen_12, array_src_12, array_dst_12, array_proto_12, array_srcport_12,
     array_dstport_12, array_labels_12, array_sdport_12) = generatelist(
        'C:/Users/lenovo/Desktop/dataprocesssort/data_sort_15/Tinba.csv')
    print(array_labels_12)
    (array_time_13, array_len_13, array_tcplen_13, array_src_13, array_dst_13, array_proto_13, array_srcport_13,
     array_dstport_13, array_labels_13, array_sdport_13) = generatelist(
        'C:/Users/lenovo/Desktop/dataprocesssort/data_sort_15/Virut.csv')
    print(array_labels_13)
    (array_time_14, array_len_14, array_tcplen_14, array_src_14, array_dst_14, array_proto_14, array_srcport_14,
     array_dstport_14, array_labels_14, array_sdport_14) = generatelist(
        'C:/Users/lenovo/Desktop/dataprocesssort/data_sort_15/WorldOfWarcraft.csv')
    print(array_labels_14)
    (array_time_15, array_len_15, array_tcplen_15, array_src_15, array_dst_15, array_proto_15, array_srcport_15,
     array_dstport_15, array_labels_15, array_sdport_15) = generatelist(
        'C:/Users/lenovo/Desktop/dataprocesssort/data_sort_15/Zeus.csv')
    print(array_labels_15)"""


    G = DynamicList()
    labels = []
    labels_node = []
    graph_indicator = []
    k = 1
    num = 1
    (G1, labels1, labels_node1, graph_indicator1, k1, num1) = datatoset(array_time_1, array_len_1, array_labels_1, array_src_1, array_dst_1, array_proto_1, array_srcport_1, array_dstport_1, array_sdport_1, k, num)
    print("G1")
    (G2, labels2, labels_node2, graph_indicator2, k2, num2) = datatoset(array_time_2, array_len_2, array_labels_2, array_src_2, array_dst_2, array_proto_2, array_srcport_2, array_dstport_2, array_sdport_2, k1, num1)
    print("G2")
    (G3, labels3, labels_node3, graph_indicator3, k3, num3) = datatoset(array_time_3, array_len_3, array_labels_3, array_src_3, array_dst_3, array_proto_3, array_srcport_3, array_dstport_3, array_sdport_3, k2, num2)
    print("G3")
    (G4, labels4, labels_node4, graph_indicator4, k4, num4) = datatoset(array_time_4, array_len_4, array_labels_4, array_src_4, array_dst_4, array_proto_4, array_srcport_4, array_dstport_4, array_sdport_4, k3, num3)
    print("G4")
    (G5, labels5, labels_node5, graph_indicator5, k5, num5) = datatoset(array_time_5, array_len_5, array_labels_5, array_src_5, array_dst_5, array_proto_5, array_srcport_5, array_dstport_5, array_sdport_5, k4, num4)
    print("G5")
    (G6, labels6, labels_node6, graph_indicator6, k6, num6) = datatoset(array_time_6, array_len_6, array_labels_6, array_src_6, array_dst_6, array_proto_6, array_srcport_6, array_dstport_6, array_sdport_6, k5, num5)
    print("G6")
    (G7, labels7, labels_node7, graph_indicator7, k7, num7) = datatoset(array_time_7, array_len_7, array_labels_7, array_src_7, array_dst_7, array_proto_7, array_srcport_7, array_dstport_7, array_sdport_7, k6, num6)
    print("G7")
    (G8, labels8, labels_node8, graph_indicator8, k8, num8) = datatoset(array_time_8, array_len_8, array_labels_8, array_src_8, array_dst_8, array_proto_8, array_srcport_8, array_dstport_8, array_sdport_8, k7, num7)
    print("G8")
    (G9, labels9, labels_node9, graph_indicator9, k9, num9) = datatoset(array_time_9, array_len_9, array_labels_9, array_src_9, array_dst_9, array_proto_9, array_srcport_9, array_dstport_9, array_sdport_9, k8, num8)
    print("G9")
    (G10, labels10, labels_node10, graph_indicator10, k10, num10) = datatoset(array_time_10, array_len_10, array_labels_10, array_src_10, array_dst_10, array_proto_10, array_srcport_10, array_dstport_10, array_sdport_10, k9, num9)
    print("G10")
    (G11, labels11, labels_node11, graph_indicator11, k11, num11) = datatoset(array_time_11, array_len_11, array_labels_11, array_src_11, array_dst_11, array_proto_11, array_srcport_11, array_dstport_11, array_sdport_11, k10, num10)
    print("G11")
    (G12, labels12, labels_node12, graph_indicator12, k12, num12) = datatoset(array_time_12, array_len_12, array_labels_12, array_src_12, array_dst_12, array_proto_12, array_srcport_12, array_dstport_12, array_sdport_12, k11, num11)
    print("G12")
    (G13, labels13, labels_node13, graph_indicator13, k13, num13) = datatoset(array_time_13, array_len_13, array_labels_13, array_src_13, array_dst_13, array_proto_13, array_srcport_13, array_dstport_13, array_sdport_13, k12, num12)
    print("G13")
    (G14, labels14, labels_node14, graph_indicator14, k14, num14) = datatoset(array_time_14, array_len_14, array_labels_14, array_src_14, array_dst_14, array_proto_14, array_srcport_14, array_dstport_14, array_sdport_14, k13, num13)
    print("G14")
    (G15, labels15, labels_node15, graph_indicator15, k15, num15) = datatoset(array_time_15, array_len_15, array_labels_15, array_src_15, array_dst_15, array_proto_15, array_srcport_15, array_dstport_15, array_sdport_15, k14, num14)
    print("G15")
    (G16, labels16, labels_node16, graph_indicator16, k16, num16) = datatoset(array_time_16, array_len_16, array_labels_16, array_src_16, array_dst_16, array_proto_16, array_srcport_16, array_dstport_16, array_sdport_16, k15, num15)
    print("G16")
    (G17, labels17, labels_node17, graph_indicator17, k17, num17) = datatoset(array_time_17, array_len_17, array_labels_17, array_src_17, array_dst_17, array_proto_17, array_srcport_17, array_dstport_17, array_sdport_17, k16, num16)
    print("G17")
    (G18, labels18, labels_node18, graph_indicator18, k18, num18) = datatoset(array_time_18, array_len_18, array_labels_18, array_src_18, array_dst_18, array_proto_18, array_srcport_18, array_dstport_18, array_sdport_18, k17, num17)
    print("G18")
    (G19, labels19, labels_node19, graph_indicator19, k19, num19) = datatoset(array_time_19, array_len_19, array_labels_19, array_src_19, array_dst_19, array_proto_19, array_srcport_19, array_dstport_19, array_sdport_19, k18, num18)
    print("G19")
    (G20, labels20, labels_node20, graph_indicator20, k20, num20) = datatoset(array_time_20, array_len_20, array_labels_20, array_src_20, array_dst_20, array_proto_20, array_srcport_20, array_dstport_20, array_sdport_20, k19, num19)
    print("G20")
    (G21, labels21, labels_node21, graph_indicator21, k21, num21) = datatoset(array_time_21, array_len_21, array_labels_21, array_src_21, array_dst_21, array_proto_21, array_srcport_21, array_dstport_21, array_sdport_21, k20, num20)
    print("G21")
    # 将所有的动态图、标签、节点标签和图指示器合并成一个大的动态图 G，
    # 以及对应的标签 labels、节点标签 labels_node 和图指示器 graph_indicator
    G = G1 + G2 + G3 + G4 + G5 + G6 + G7 + G8 + G9 + G10 \
        + G11 + G12 + G13 + G14 + G15 + G16 + G17 + G18 + G19 + G20 \
        + G21
    labels = labels1 + labels2 + labels3 + labels4 + labels5 + labels6 + labels7 + labels8 + labels9 + labels10 \
             + labels11 + labels12 + labels13 + labels14 + labels15 + labels16 + labels17 + labels18 + labels19 + labels20 \
             + labels21
    labels_node = labels_node1 + labels_node2 + labels_node3 + labels_node4 + labels_node5 + labels_node6 + labels_node7 + labels_node8 + labels_node9 + labels_node10 \
                  + labels_node11 + labels_node12 + labels_node13 + labels_node14 + labels_node15 + labels_node16 + labels_node17 + labels_node18 + labels_node19 + labels_node20 \
                  + labels_node21

    graph_indicator = graph_indicator1 + graph_indicator2 + graph_indicator3 + graph_indicator4 + graph_indicator5 + graph_indicator6 + graph_indicator7 + graph_indicator8 + graph_indicator9 + graph_indicator10 \
                      + graph_indicator11 + graph_indicator12 + graph_indicator13 + graph_indicator14 + graph_indicator15 + graph_indicator16 + graph_indicator17 + graph_indicator18 + graph_indicator19 + graph_indicator20 \
                      + graph_indicator21
    
    """G = G1 + G2 + G3 + G4 + G5 + G6 + G7 + G8 + G9 + G10 \
        + G11 + G12 + G13 + G14 + G15
    labels = labels1 + labels2 + labels3 + labels4 + labels5 + labels6 + labels7 + labels8 + labels9 + labels10 \
             + labels11 + labels12 + labels13 + labels14 + labels15
    labels_node = labels_node1 + labels_node2 + labels_node3 + labels_node4 + labels_node5 + labels_node6 + labels_node7 + labels_node8 + labels_node9 + labels_node10 \
                  + labels_node11 + labels_node12 + labels_node13 + labels_node14 + labels_node15

    graph_indicator = graph_indicator1 + graph_indicator2 + graph_indicator3 + graph_indicator4 + graph_indicator5 + graph_indicator6 + graph_indicator7 + graph_indicator8 + graph_indicator9 + graph_indicator10 \
                      + graph_indicator11 + graph_indicator12 + graph_indicator13 + graph_indicator14 + graph_indicator15"""

    # 将生成的图的标签（labels）和图指示器（graph_indicator）写入到两个不同的文本文件中

    #  打开一个名为 'Applications_graph_labels.txt' 的文本文件，以写入（'w'）的模式。
    #  如果文件不存在，将会创建新的文件；如果文件已存在，将会清空文件内容。
    file = open('Applications_graph_labels.txt', 'w')
    # 使用一个循环，遍历 labels 列表中的每个元素。
    # 将每个元素转换为字符串，然后去除字符串中的方括号 "[" 和 "]"，最后加上换行符 '\n'。
    # 将处理后的字符串写入 'Applications_graph_labels.txt' 文件。

    for i in range(len(labels)):
        s = str(labels[i]).replace('[', '').replace(']', '') + '\n'
        file.write(s)
    file.close() # 关闭 'Applications_graph_labels.txt' 文件，确保写入的内容被保存。
    #file = open('Applications_node_labels.txt', 'w')
    #for i in range(len(labels_node)):
        #s = str(labels_node[i]).replace('[', '').replace(']', '') + '\n'
        #file.write(s)
    #file.close()
    # 打开一个名为 'Applications_graph_indicator.txt' 的文本文件，以写入（'w'）的模式。
    file = open('Applications_graph_indicator.txt', 'w')
    # 使用一个循环，遍历 graph_indicator 列表中的每个元素。
    # 将每个元素转换为字符串，然后去除字符串中的方括号 "[" 和 "]"，最后加上换行符 '\n'。
    # 将处理后的字符串写入 'Applications_graph_indicator.txt' 文件。
    for i in range(len(graph_indicator)):
        s = str(graph_indicator[i]).replace('[', '').replace(']', '') + '\n'
        file.write(s)
    file.close()# 关闭 'Applications_graph_indicator.txt' 文件，确保写入的内容被保存。